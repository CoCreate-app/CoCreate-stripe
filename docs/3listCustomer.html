<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>CoCreate-api Documentation | CoCreateJS </title>
        <link rel="icon" type="image/png" sizes="32x32" href="https://cocreate.app/images/favicon.ico">
        <meta name="description" content="A simple HTML5 and pure javascript component. Easy configuration using data-attributes and highly styleable." />
        <meta name="keywords" content="helper classes, utility classes, css framework, css library, inline style classes" />
        <meta name="robots" content="index,follow" />
       	<meta property="og:image" content="https://cdn.cocreate.app/docs/stripe.png">
        
        <!-- CoCreate CSS -->
        <link rel="stylesheet" href="https://cdn.cocreate.app/latest/CoCreate.min.css" type="text/css"/>
    </head>

    <body>
        <div data-collection="" data-document_id="" name="" id="cocreate-api">
            <div class="display:flex flex-wrap:wrap justify-content:space-between margin:10px">
                <div class="display:flex align-items:center">
                    <h2>CoCreate-api</h2>
                </div>
                <div class="display:flex align-items:center font-size:20px" data-share_network="true" data-share_text="Enter decription here" data-share_title="testing im a title" data-share_height="600" data-share_width="700" data-share_media="https://cdn.cocreate.app/docs/stripe.png">
                    <a href="https://github.com/CoCreate-app/CoCreate-api" target="_blank" class="margin-right:15px"><i class="fab fa-github"></i></a>
                    <a class="margin-right:15px" data-share_network='twitter' title="Share on twitter"><i class="fab fa-twitter"></i></a>
                    <a class="margin-right:15px" data-share_network='facebook' title="Share on Facebook"><i class="fab fa-facebook"></i></a>
                    <a class="margin-right:15px" data-share_network='instagram' title="Share on instagram"><i class="fab fa-instagram"></i></a>
                    <a class="margin-right:15px" data-share_network='share' title="Share on share"><i class="fas fa-share-alt"></i></a>
                </div>
            </div>
            <p class="max-width:500px margin:20px_10px">In this section we will use cocreate-api to create a customer and send dynamic data from the frontEnt to the Websocket.</p>
            <div id="api-section" class="display:flex flex-wrap:wrap">
                <div class="flex-grow:1 width:300px padding:0px_10px margin:20px_0px">
                <div id="stripe-install" class="border-bottom:1px_solid_lightgrey">
                        <span class="display:flex align-items:center width:fit-content" data-hover="display:block!important" data-hover_target='[href="#stripe-install"]'>
                            <h2 class="padding:5px_0px">Install</h2>
                            <a class="margin-left:10px display:none" href="#stripe-install"><i class="fas fa-link"></i></a>
                        </span>
                    </div>
                <pre><code class="language-bash">npm i @cocreate/api</code></pre>
                <p class="padding:10px_0px">Or you can use cdn link:</p>
                <pre><code class="language-html">&lt;script&gt;https://cdn.cocreate.app/stripe/latest/CoCreate-api.min.js&lt;/script&gt;</code></pre>

                <div id="stripe-usage" class="margin-top:80px border-bottom:1px_solid_lightgrey">
                        <span class="display:flex align-items:center width:fit-content" data-hover="display:block!important" data-hover_target='[href="#stripe-usage"]'>
                            <h2 class="padding:5px_0px">Usage</h2>
                            <a class="margin-left:10px display:none" href="#stripe-usage"><i class="fas fa-link"></i></a>
                        </span>
                    </div>
                    <div class="">
                        <p class="padding:10px_0px">According to the reference of the official documentation of stripe  <a href="https://stripe.com/docs/api/customers/list" target="_blank" >LIST_CUSTOMER</a> </p>
                        <div class="flex-grow:1 min-width:300px width:100%">
                            <pre>
                                <code class="language-js">
Name-file : index-connect.html

&#x3C;form data-real_time=&#x22;true&#x22; id=&#x22;customer-form&#x22; data-collection=&#x22;modules&#x22; data-form_id=&#x22;stripe&#x22;&#x3E;
  &#x3C;button class=&#x27;listCustomersBtn&#x27;&#x3E;Click getList&#x3C;/button&#x3E;
&#x3C;/form&#x3E;
                                </code>
                            </pre>
                        </div>
                        
                        <p class="padding:10px_0px">The code, used for the front-end custom classAs can be seen, we only edit the parameter of the class where the css selector for the trigger buttons is registered <b>classBtns</b></p>
                        <div class="flex-grow:1 min-width:300px width:100%">
                            <pre>
                                <code class="language-js">
Name-file = Cocreate-stripe.js   

var CocreateStripeAPi = function() {
...........
    this.classBtns = [&#x27;.listCustomersBtn&#x27;]
...........
}
                                </code>
                            </pre>
                        </div>

                        <p class="padding:10px_0px">Only, we will show the interesting parts of the code, since in the index we show the general configuration of the websocket endpoint</p>
                        <div class="flex-grow:1 min-width:300px width:100%">
                            <pre>
                                <code class="language-js">
Name-file = Cocreate-stripe.js   

........
switch (type) {
&#x9;case &#x27;.listCustomersBtn&#x27;:
    &#x9;const customers = await stripe.customers.list({limit: 3,});
        utils.send_response(that.wsManager,socket,{&#x22;type&#x22;:type,&#x22;response&#x22;:customers},send_response)
    break;
}
........
                                </code>
                            </pre>
                        </div>

                        <p class="padding:10px_0px">If you have done everything right you will have an answer similar to this</p>

                        <p class="padding:10px_0px"><img src="img/list_customer1.png"></p>
                        
                        <p class="padding:10px_0px">But now we need to handle this result in our custom front-end class</p>
                        <div class="flex-grow:1 min-width:300px width:100%">
                            <pre>
                                <code class="language-js">
Name-file = Cocreate-stripe.js   

var CocreateStripeAPi = function() {
...........
    this.setResult = function(data) {
    if(typeof(data[&#x22;type&#x22;]) != &#x27;undefined&#x27;){
        let type = data[&#x22;type&#x22;];
        switch(type){
                case &#x27;.listCustomersBtn&#x27;:
                    console.log(&#x22;.listCustomersBtn frontEnd&#x22;, data)
                break;
            }
        }
    }
...........
}                                </code>
                            </pre>
                        </div>

<p class="padding:10px_0px">For this case we will use a template, which will be filled with the data obtained by the webSocket using CocreateRender</p>

                        <div class="flex-grow:1 min-width:300px width:100%">
                            <pre>
                                <code class="language-js">
&#x3C;div data-template_id=&#x22;abc1&#x22; data-fetch_collection=&#x22;render_test&#x22;&#x3E;
  &#x3C;div class=&#x22;template card card margin:10px &#x22; 
    data-value=&#x22;{{render2.data._id}}&#x22; 
    data-template_id=&#x22;abc1&#x22; 
    data-render_array=&#x22;render2.data&#x22;&#x3E;
        &#x3C;div class=&#x22;display:flex justify-content:space-between align-items:center width:100%&#x22;&#x3E;
          &#x3C;div class=&#x22;display:flex&#x22;&#x3E;
            &#x3C;div class=&#x22;display:flex align-items:center&#x22;&#x3E;
              &#x3C;span class=&#x22;icon status font-size:20px margin-right:10px&#x22;&#x3E;&#x3C;/span&#x3E;
            &#x3C;/div&#x3E;
            &#x3C;div class=&#x22;display:flex align-items:center  flex-wrap:wrap&#x22;&#x3E;
              &#x3C;h3 class=&#x22;margin-right:10px&#x22; value=&#x22;{{render2.data.id}}&#x22;&#x3E;ID&#x3C;/h3&#x3E;
              &#x3C;span class=&#x22;margin-right:10px&#x22; value=&#x22;{{render2.data.email}}&#x22;&#x3E;email&#x3C;/span&#x3E;
            &#x3C;/div&#x3E;
          &#x3C;/div&#x3E;
        &#x3C;/div&#x3E;
  &#x3C;/div&#x3E;
&#x3C;/div&#x3E;

                                </code>
                            </pre>
                        </div>
                        
                        <p class="padding:10px_0px">To capture the data that the webocket responds to, we must override the setResult method, here all the responses from a specific endpoint will arrive for this specific example, our enpoint is stripe, and our typeRequest is listCustomersBtn</p>

                        <div class="flex-grow:1 min-width:300px width:100%">
                            <pre>
                                <code class="language-js">
this.setResult = function(data) {
    if(typeof(data[&#x22;type&#x22;]) != &#x27;undefined&#x27;){
        let type = data[&#x22;type&#x22;];
        switch(type){
            case &#x27;.listCustomersBtn&#x27;:
                CoCreate.render.data(&#x27;[data-template_id=abc1]&#x27;,{
                     render2: {
                        data: data.response.data
                    }
                });//end Render
            break;
        }
    }
}
                                </code>
                            </pre>
                        </div>
<p class="padding:10px_0px">In the following image we see the result of the template on the left, and on the right the result that the websocket responds to the frontEnd</p>
<p class="padding:10px_0px"><img src="img/list_customer3.png"></p>

<p class="padding:10px_0px">Here we list the methods that can be overridden of the cocreate-api class, to control the data according to the life cycle</p>
<p class="padding:10px_0px">
    <ul>
        <li>preview_validate_btn(btn,event) : Ideal for front-end validations, false should be returned in case the client's input does not comply with its validation logic</li>
        <li>setResult(data) : We use this method to manipulate the data once it reaches the frontEnd</li>
        <li>manipulateDataToSend(btn,data) : all methods are optional, this method is only used in case you want to manipulate the data or change the format of a variable before sending it the websocket</li>
    </ul>
</p>
                        
                    </div>
                    
                </div>
                
                <div class="flex-grow:1 width:300px padding:0px_10px margin:20px_0px  border-bottom:1px_solid_lightgrey">
                    <!-- SandBox -->
                    <div id="stripe-demo" class="border-bottom:1px_solid_lightgrey">
                        <span class="display:flex align-items:center width:fit-content" data-hover="display:block!important" data-hover_target='[href="#stripe-demo"]'>
                            <h2 class="padding:5px_0px">Demo</h2>
                            <a class="margin-left:10px display:none" href="#stripe-demo"><i class="fas fa-link"></i></a>
                        </span>
                    </div>
                    <div class="position:sticky top:0 padding:15px_0px height:100vh">
    			    <div class="container svColumn overflow:hidden card border-radius:2px width:auto height:100%" id="form-sandbox">
    			       <div class="font-size:20px position:absolute top:10px right:10px opacity:0.6 z-index:7">
    			        <a class="margin-right:10px" id="preview" data-show="preview" data-hide="code"><i class="far fa-eye"></i></a>
    			        <a class="margin-right:10px hidden" id="code" data-show="code" data-hide="preview"><i class="fas fa-code"></i></a>
    			        <!--<a class="margin-right:10px"><i class="far fa-window-maximize"></i></a>-->
    					<a target="modal" href="module_activity_datatable.html"
    				  	     data-pass_collection="modules"
    				  	     data-pass_document_id=""
    				  	     data-pass_fetch_value=""
    				  	     data-pass_prefix=""
    				  	     data-pass_to="render"
    				  	     data-modal_width="600px"
    				  	     data-modal_height="400px"
    				  	     data-modal_color="#229954"
    				  	     data-modal_header="false"
    				  	     class="margin-right:10px">
    				  	    <i class="fas fa-external-link-alt"></i>
    				     </a>        
    				     <a class="margin-right:5px" data-fullscreen target="#playground-1"><i class="fas fa-expand"></i></a>
    			        </div>
    			
    			        <div class="svRow">
    			            
    			            <div class="svColumn">
    			            	
    			                <div class="svPanel">
    			                    <div data-realtime="false"
    			                        data-collection="modules"
    			                        data-document_id="5eefe30952c6e94c75fb5e3f"
    			                        name="html" 
    			                        id="7" 
    			                        class="codemirror min-width:300px">
    			                    </div>
    			                </div>
    			            	<div class="svSplitter svHorizontal"> </div>
    			
    			                <div class="svPanel">
    			                    <iframe data-get_value="7" frameBorder="0" height="100%" width="100%"  class="min-width:300px"></iframe>
    			                </div>
    			                
    			            </div>
    			        </div>
    			    </div>
    			    <!-- End SandBox -->
    			    </div>
                </div>
                
            </div>				
        </div>
        <script>
            var config = {
                apiKey: 'c2b08663-06e3-440c-ef6f-13978b42883a',
                                organization_Id: '5de0387b12e200ea63204d6c'
            }
        </script>
    
        <!--CoCreateJS-->
        <script src="https://cdn.cocreate.app/latest/CoCreate.min.js" ></script>
    </body>
</html>