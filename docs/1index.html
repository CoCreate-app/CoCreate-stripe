<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>CoCreate-api Documentation | CoCreateJS </title>
        <link rel="icon" type="image/png" sizes="32x32" href="https://cocreate.app/images/favicon.ico">
        <meta name="description" content="A simple HTML5 and pure javascript component. Easy configuration using data-attributes and highly styleable." />
        <meta name="keywords" content="helper classes, utility classes, css framework, css library, inline style classes" />
        <meta name="robots" content="index,follow" />
       	<meta property="og:image" content="https://cdn.cocreate.app/docs/stripe.png">
        
        <!-- CoCreate CSS -->
        <link rel="stylesheet" href="https://cdn.cocreate.app/latest/CoCreate.min.css" type="text/css"/>
        <link rel="stylesheet" href="/docs/index.css" data-collection="files" data-document_id="60888216117c640e7596303f" name="src" type="text/css" data-save="true"/>
	</head>

    <body>
		<nav class="nav display:flex align-items:center background:whitesmoke padding-top:10px padding-bottom:10px" data-main_content_id="content" data-scroll="sticky-nav,hide-nav" data-scroll_up="10" data-scroll_down="10" data-collection="components" data-document_id="60395ef42b3ac232657040fd" name="html">
		</nav>
		<sidenav id="menuL" class="cocreate-sidenav background:whitesmoke" data-main_content="content" sidenav-default_desktop="expanded" sidenav-default_tablet="offcanvas" sidenav-ontoggle_desktop="offcanvas" sidenav-ontoggle_tablet="expanded">
			<menu data-collection="components" data-document_id="603717b07de7fb350ae9fec8" name="html"></menu>
			<div class="resizeHandler"></div>
	    </sidenav>
        <main class="padding-top:15px padding:15px@lg@xl" data-main_content_id="content" id="cocreate-api">
            <div class="display:flex flex-wrap:wrap justify-content:space-between position:relative margin:10px">
                <div class="display:flex align-items:center">
                    <h2>CoCreate-api</h2>
                </div>
                <div class="display:flex align-items:center font-size:20px position:absolute right:0 padding:5px background:white">
                    <div class="display:flex align-items:center transition:0.3s padding-left:10px" data-share_network="true" data-share_text="Enter decription here" data-share_title="testing im a title" data-share_height="600" data-share_width="700" data-share_media="https://cdn.cocreate.app/docs/stripe.png" data-hover="display:block!important" data-hover_target=".social-networks">
                        <div class="display:none social-networks">
                            <a class="margin-right:15px" data-share_network='twitter' title="Share on twitter"><i class="fab fa-twitter"></i></a>
                            <a class="margin-right:15px" data-share_network='facebook' title="Share on Facebook"><i class="fab fa-facebook"></i></a>
                            <a class="margin-right:15px" data-share_network='instagram' title="Share on instagram"><i class="fab fa-instagram"></i></a>
                        </div>
                        <a class="margin-right:15px" data-share_network='share' title="Share on share"><i class="fas fa-share-alt"></i></a>
                    </div>
                    <a href="https://github.com/CoCreate-app/CoCreate-api" target="_blank" class="margin-right:15px"><i class="fab fa-github"></i></a>
                </div>
            </div>
            <h1 class="max-width:500px margin:20px_10px line-height:1.5 font-size:16px font-weight:100">Cocreate, puts at your disposal a new module that works as a communication layer between the backed of cocreate and any API. Step by step, we will learn how to use it and what advantages it brings us using data-attributes</h1>
            <div id="api-section" class="display:flex flex-wrap:wrap">
                <div class="flex-grow:1 width:400px width:300px@xs padding:0px_10px margin-top:60px">
                <div id="stripe-install" class="border-bottom:1px_solid_lightgrey" data-scroll data-scroll_intersect="color:dodgerblue" data-scroll_target="#stripe-install-section">
                        <span class="display:flex align-items:center width:fit-content" data-hover="display:block!important" data-hover_target='[href="#stripe-install"]'>
                            <h2 class="padding:5px_0px">Install</h2>
                            <a class="margin-left:10px display:none" href="#stripe-install"><i class="fas fa-link"></i></a>
                        </span>
                    </div>
                <pre><code class="language-bash">npm i @cocreate/api</code></pre>
                <p class="padding:10px_0px line-height:1.5">Or you can use cdn link:</p>
                <pre><code class="language-html">&lt;script&gt;https://cdn.cocreate.app/stripe/latest/CoCreate-api.min.js&lt;/script&gt;</code></pre>

                <div id="stripe-usage" class="margin-top:80px border-bottom:1px_solid_lightgrey" data-scroll data-scroll_intersect="color:dodgerblue" data-scroll_target="#stripe-usage-section">
                        <span class="display:flex align-items:center width:fit-content" data-hover="display:block!important" data-hover_target='[href="#stripe-usage"]'>
                            <h2 class="padding:5px_0px">Usage</h2>
                            <a class="margin-left:10px display:none" href="#stripe-usage"><i class="fas fa-link"></i></a>
                        </span>
                    </div>
                    <div class="">
                        <p class="padding:10px_0px line-height:1.5">we will start our documentation, creating an example for stripe, The following code is the implementation of our custom front-end class using javascript prototype-based inheritance, A fundamental aspect is that the class of the button that contains the action must be inside a form</p>
                        <div class="flex-grow:1 min-width:300px width:100%">
                            <pre>
                                <code class="language-js">
Name-file = Cocreate-stripe.js                            var CocreateStripeAPi = function() {
    this.classBtns = [&#x27;.getBalanceBtn&#x27;,];
    this.data_param = &#x27;data-stripe&#x27;;
    this.req_socket = &#x27;stripe&#x27;;
    CoCreate.apiSocket.call(this);
    
};
CocreateStripeAPi.prototype = Object.create(CoCreate.apiSocket.prototype);
CocreateStripeAPi.prototype.constructor = CocreateStripeAPi;
var cocreateStripeRegisterAPi = new CocreateStripeAPi();
                                </code>
                            </pre>
                        </div>
                        <p class="padding:10px_0px line-height:1.5"><b><span class="cocreate-badge warning">Array</span> classBtns :</b> Here we place the classes of the actuator buttons, remember that these buttons must always be inside a form </p>
                        <p class="padding:10px_0px line-height:1.5"><b><span class="cocreate-badge warning">String</span> data_param :</b> Our Cocreate-Api script needs a starting point to collect data-attributes within the parent form of the trigger button, and the data_param attribute you define tells cocreate-api what data to send to the WebSocketServer </p>
                        <p class="padding:10px_0px line-height:1.5"><b><span class="cocreate-badge warning">String</span> req_socket :</b> is used to define the endpoint of the websocket server </p>
                        <p class="padding:10px_0px line-height:1.5">We will call the following file index-connect.html, we will use it as a starting point to start the action that will travel to the server, and it will give us a response from stripe</p>

                        <div class="flex-grow:1 min-width:300px width:100%">
                            <pre>
                                <code class="language-js">
Name-file : index-connect.html

&#x3C;!DOCTYPE html&#x3E;
&#x3C;html&#x3E;
&#x3C;head&#x3E;
 &#x3C;title&#x3E;Stripe&#x3C;/title&#x3E;
 &#x3C;head&#x3E;     
&#x3C;h1&#x3E;Test&#x3C;/h1&#x3E;
&#x3C;form data-real_time=&#x22;true&#x22; id=&#x22;customer-form&#x22; data-collection=&#x22;modules&#x22; data-form_id=&#x22;resller&#x22;&#x3E;
 &#x3C;button class=&#x27;getBalanceBtn&#x27;&#x3E;getBalanceBtn in console&#x3C;/button&#x3E;
&#x3C;/form&#x3E;
&#x3C;script&#x3E;
    var config = {
      apiKey: &#x27;c2b08663-06e3-440c-ef6f-13978b42883a&#x27;,
      securityKey: &#x27;f26baf68-e3a9-45fc-effe-502e47116265&#x27;,
      organization_Id: &#x27;5de0387b12e200ea63204d6c&#x27;
    }
&#x3C;/script&#x3E;
&#x3C;script src=&#x22;https://cdn.cocreate.app/latest/CoCreate.min.js&#x22;&#x3E;&#x3C;/script&#x3E;
&#x3C;script src=&#x22;../js/Cocreate-APISocket.js&#x22;&#x3E;&#x3C;/script&#x3E;
&#x3C;script src=&#x22;../js/Cocreate-stripe.js&#x22;&#x3E;&#x3C;/script&#x3E;                                
                                </code>
                            </pre>
                        </div>

                        <p class="padding:10px_0px line-height:1.5">In the case of the server code, here it varies from your configuration of your backend server, in our case we have a backend server with NodeJS and we use the WebSocket as a communication gateway</p>

                        <div class="flex-grow:1 min-width:300px width:100%">
                            <pre>
                                <code class="language-js">
/* global Y */
&#x27;use strict&#x27;
var utils= require(&#x27;../utils&#x27;);
const CoCreateBase = require(&#x22;../../base&#x22;);

class CoCreateStripe extends CoCreateBase {
&#x9;constructor(wsManager, db) {
&#x9;&#x9;super(wsManager, db);
&#x9;&#x9;this.init();
&#x9;}
&#x9;
&#x9;init() {
&#x9;&#x9;if (this.wsManager) {
&#x9;&#x9;&#x9;this.wsManager.on(&#x27;stripe&#x27;,(socket, data)=&#x3E;this.sendStripe(socket,data));
&#x9;&#x9;}
&#x9;}

&#x9;async sendStripe(socket, data) {
&#x9;    let that = this;
&#x9;    let send_response =&#x27;stripe&#x27;;
&#x9;    let data_original = {...data};
        let type = data[&#x27;type&#x27;];
        delete data[&#x27;type&#x27;];
        let url = &#x27;&#x27;;
        let method = &#x27;&#x27;;
        let targets = [];
        let tags = [];
        let key_stripe = &#x27;sk_test_4eC39HqLyjWDarjtT1zdp7dc&#x27;
        const stripe = require(&#x27;stripe&#x27;)(&#x27;sk_test_lWZQujOjyjfDq991GZjKmfli&#x27;);
  
        switch (type) {
            case &#x27;.getBalanceBtn&#x27;:
                stripe.balance.retrieve((err, balance) =&#x3E; {
                    if (!err &#x26;&#x26; balance) {
                      utils.send_response(that.wsManager,socket,{&#x22;test&#x22;:&#x22;from_server&#x22;,&#x22;balance&#x22;:balance},send_response)
                    } else if (err) {
                      utils.send_response(that.wsManager,socket,{&#x22;test&#x22;:&#x22;from_server&#x22;,&#x22;balance_error&#x22;:0},send_response)
                    }
                  });
                break;
        }
&#x9;    
&#x9;}// end sendStripe
}//end Class 
module.exports = CoCreateStripe;

                                </code>
                            </pre>
                        </div>

                        <p class="padding:10px_0px line-height:1.5"> 
                            <span class="cocreate-badge warning">Note :</span> In this line we define the endpoint of the webSocket Server previously defined in the frontend
                            <pre>
                                <code class="language-js"> 
this.wsManager.on('stripe',(socket, data)=>this.sendStripe(socket,data)); 
                                </code>
                            </pre>
                        </p>

                    </div>
                    <div id="stripe-attributes" class="margin-top:80px border-bottom:1px_solid_lightgrey" data-scroll data-scroll_intersect="color:dodgerblue" data-scroll_target="#stripe-attributes-section">
                        <span class="display:flex align-items:center width:fit-content" data-hover="display:block!important" data-hover_target='[href="#stripe-attributes"]'>
                            <h2 class="padding:5px_0px">Attributes</h2>
                            <a class="margin-left:10px display:none" href="#stripe-attributes"><i class="fas fa-link"></i></a>
                        </span>
                    </div>
                    <ul class="list-style-type:none ">
                        <li class="padding:15px_0px border-bottom:1px_solid_lightgrey">
                            <h4><span>data_param</span> <span class="cocreate-badge success">string</span> <span class="cocreate-badge warning">optional</span></h4>
                            <p>parameter defined in your custom class, this parameter should add to all form elements you want to send to webocket</p>
                        </li>
                        <li class="padding:15px_0px border-bottom:1px_solid_lightgrey">
                            <h4><span>class</span> <span class="cocreate-badge success">string</span> <span class="cocreate-badge warning">optional</span></h4>
                            <p>classBtns : the action generator button, must have a class defined in this attribute of your custom FrontEnd class</p>
                        </li>
                    </ul>
                </div>
                
                <div class="flex-grow:1 width:300px padding:0px_10px margin-top:60px border-bottom:1px_solid_lightgrey">
                    <!-- SandBox -->
                    <div id="stripe-demo" class="border-bottom:1px_solid_lightgrey" data-scroll data-scroll_intersect="color:dodgerblue" data-scroll_target="#stripe-demo-section">
                        <span class="display:flex align-items:center width:fit-content" data-hover="display:block!important" data-hover_target='[href="#stripe-demo"]'>
                            <h2 class="padding:5px_0px">Demo</h2>
                            <a class="margin-left:10px display:none" href="#stripe-demo"><i class="fas fa-link"></i></a>
                        </span>
                    </div>
                    <div class="position:sticky top:0 padding:15px_0px height:100vh">
    			    <div class="container svColumn overflow:hidden card border-radius:2px width:auto height:100%" id="form-sandbox">
    			       <div class="font-size:20px position:absolute top:10px right:10px opacity:0.6 z-index:7">
    			        <a class="margin-right:10px" id="preview" data-show="preview" data-hide="code"><i class="far fa-eye"></i></a>
    			        <a class="margin-right:10px hidden" id="code" data-show="code" data-hide="preview"><i class="fas fa-code"></i></a>
    			        <!--<a class="margin-right:10px"><i class="far fa-window-maximize"></i></a>-->
    					<a target="modal" href="module_activity_datatable.html"
    				  	     data-pass_collection="modules"
    				  	     data-pass_document_id=""
    				  	     data-pass_fetch_value=""
    				  	     data-pass_prefix=""
    				  	     data-pass_to="render"
    				  	     data-modal_width="600px"
    				  	     data-modal_height="400px"
    				  	     data-modal_color="#229954"
    				  	     data-modal_header="false"
    				  	     class="margin-right:10px">
    				  	    <i class="fas fa-external-link-alt"></i>
    				     </a>        
    				     <a class="margin-right:5px" data-fullscreen target="#playground-1"><i class="fas fa-expand"></i></a>
    			        </div>
    			
    			        <div class="svRow">
    			            
    			            <div class="svColumn">
    			            	
    			                <div class="svPanel">
    			                    <div data-realtime="false"
    			                        data-collection="modules"
    			                        data-document_id="5eefe30952c6e94c75fb5e3f"
    			                        name="html" 
    			                        id="7" 
    			                        class="codemirror min-width:300px">
    			                    </div>
    			                </div>
    			            	<div class="svSplitter svHorizontal"> </div>
    			
    			                <div class="svPanel">
    			                    <iframe data-get_value="7" frameBorder="0" height="100%" width="100%"  class="min-width:300px"></iframe>
    			                </div>
    			                
    			            </div>
    			        </div>
    			    </div>
    			    <!-- End SandBox -->
    			    </div>
                </div>
                
            </div>				
        	<button href="https://github.com/CoCreate-app/CoCreate-stripe/tree/master/docs/index.html?message=docs%3A%20describe%20your%20change..." target="_blank" class="position:fixed bottom:15px right:15px padding:15px background:dodgerblue grow-hover border-radius:50%">
		        <i class="fas fa-pencil-alt"></i>
	        </button>
		</main>
        <script>
            var config = {
                apiKey: 'c2b08663-06e3-440c-ef6f-13978b42883a',
                organization_Id: '5de0387b12e200ea63204d6c',
                host: 'wss://server.cocreate.app:8088'
            }
        </script>

    
        <!--CoCreateJS-->
        <script src="https://cdn.cocreate.app/latest/CoCreate.min.js" ></script>
    </body>
</html>